<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>המסך המפוצל הישראלי – Streams</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="header">המסך המפוצל הישראלי – Streams</div>

  <!-- Window 1 -->
  <div class="window" style="left:20px; top:80px;">
    <div class="winbar">ערוץ 12</div>
    <div class="stream-wrap">
      <iframe src="https://www.livehdtv.com/embed/channel-12-live-stream-from-isreal/" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Window 2 -->
  <div class="window" style="left:420px; top:80px;">
    <div class="winbar">ערוץ 14</div>
    <div class="stream-wrap">
      <iframe src="https://www.livehdtv.com/embed/channel-14-isreal-live/" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Window 3 -->
  <div class="window" style="left:820px; top:80px;">
    <div class="winbar">כאן 11</div>
    <div class="stream-wrap">
      <iframe src="https://www.livehdtv.com/embed/kan-11-live-stream-israel/" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Window 4 -->
  <div class="window" style="left:20px; top:320px;">
    <div class="winbar">i24news (EN)</div>
    <div class="stream-wrap">
      <iframe src="https://www.livehdtv.com/embed/i24news-live-stream-israel/" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Window 5 -->
  <div class="window" style="left:420px; top:340px;">
    <div class="winbar">i24news (HE)</div>
    <div class="stream-wrap">
      <iframe src="https://www.livehdtv.com/embed/i24news-hebrew/" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Window 6 -->
  <div class="window" style="left:820px; top:360px;">
    <div class="winbar">ערוץ 13</div>
    <div class="stream-wrap">
      <iframe src="https://www.livehdtv.com/embed/channel-13-live/" allowfullscreen></iframe>
    </div>
  </div>

  <!-- 1) Interact.js library -->
  <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
  <!-- 2) Your app logic -->
  <script>
  // Bring clicked window to front & highlight
  let zIndexCounter = 200;
  document.querySelectorAll('.window').forEach(win => {
    win.addEventListener('mousedown', ()=>{
      document.querySelectorAll('.window').forEach(w=>w.classList.remove('active'));
      win.classList.add('active');
      win.style.zIndex = ++zIndexCounter;
    });
    win.addEventListener('touchstart', ()=>{
      document.querySelectorAll('.window').forEach(w=>w.classList.remove('active'));
      win.classList.add('active');
      win.style.zIndex = ++zIndexCounter;
    }, {passive:true});
  });

  // DRAG: only from .winbar, no snapping
  interact('.window').draggable({
    inertia: false,
    allowFrom: '.winbar',
    listeners: {
      move(event) {
        const w = event.target;
        const curL = parseFloat(w.style.left) || 0;
        const curT = parseFloat(w.style.top)  || 0;
        w.style.left = curL + event.dx + 'px';
        w.style.top  = curT + event.dy + 'px';
      }
    }
  });

  // RESIZE: only from left, right, bottom; ignore title bar; no inertia
  interact('.window').resizable({
    edges: { left:true, right:true, bottom:true, top:false },
    inertia: false,
    ignoreFrom: '.winbar',
    modifiers: [
      interact.modifiers.restrictSize({
        min: { width: 170, height: 110 },
        max: { width: 900, height: 500 }
      })
    ],
    listeners: {
      move(event) {
        const w = event.target;
        let left = parseFloat(w.style.left) || 0;
        let top  = parseFloat(w.style.top)  || 0;

        // adjust position if left/bottom edges moved
        if (event.edges.left)  left += event.deltaRect.left;
        if (event.edges.top)   top  += event.deltaRect.top; // though top-edge is disabled

        // apply new size
        w.style.width  = event.rect.width  + 'px';
        w.style.height = event.rect.height + 'px';
        // apply new position
        w.style.left   = left + 'px';
        w.style.top    = top  + 'px';
      }
    }
  });
  </script>
</body>
</html>
